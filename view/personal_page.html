<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <title>考试</title>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/jquery.timeout.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <!-- <link rel="stylesheet" href="../css/style.css"> -->
    <link rel="stylesheet" href="../css/test.css">
    <!-- bootstrap -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <!-- font-awesome -->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- JQuery -->
    <script>
        $(function () {
            //关闭页面前提示

            //            $(window).on("beforeunload", function () {
            //                return "您尚未交卷！此操作将导致您的回答丢失。";
            //            });
            //            timeOver = false; //保存当前是否已经达到交卷时间
            //倒计时功能
            $(".timeout").timeout({
                //考试时间（页面刷新时，时间会重置。）
                "maxTime": 1800,                                                                                        //此处时间固定为1800,改为根据题库中的时间变化
                //到达时间自动交卷。（如果浏览器禁用JavaScript，此功能不会生效）
                "onTimeOver": function () {
                    timeOver = true;
                    alert("考试时间结束，系统自动交卷。");
                    $("#testForm").submit();//交卷
                }
            });
            //            $("#testForm").submit(function (event) {
            //                $(window).off("beforeunload");      //解除绑定页面关闭事件
            //                timeOver || checkMultiple(event);	//检查多选题是否全部作答
            //            });
            //多选题至少选择一项
            //            function checkMultiple(event) {
            //                $(".jq-multiple .question-each").each(function () {
            //                    if ($(this).find(".question-option input[type=checkbox]:checked").length < 1) {
            //                        $(this).find(".question-option input[type=checkbox]:first").focus();
            //                        event.preventDefault();  //阻止表单提交
            //                        alert('您有多选题未作答。');
            //                        return false;
            //                    }
            //                });
            //            };
        });
    </script>
</head>

<body>
    <!--试卷标题-->
    <div class="container-fluid top">
        <!-- 倒计时 -->
        <div class="top-title">正在考试 (剩余时间 <span class="timeout"></span>)</div>
    </div>
    <div style="height: 52px;"></div>

    <!-- 试卷内容整体 -->
    <div class="main container">
        <div class="row">
            <div class="col-md-offset-2 col-md-8">
                <div class="main-wrap">
                    <!-- 试卷标题 -->
                    <div class="question-title">
                        <?=$data['title']?>
                    </div>

                    <!-- 试卷内容 -->
                    <form action="total.php?id=<?=$id?>" method="post">
                        <!-- 题型导航 -->
                        <div class="nav-type">
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active">
                                    <a href="#binary" aria-controls="home" role="tab" data-toggle="tab">判断题</a>
                                </li>
                                <li role="presentation">
                                    <a href="#single" aria-controls="profile" role="tab" data-toggle="tab">单选题</a>
                                </li>
                                <li role="presentation">
                                    <a href="#multiple" aria-controls="messages" role="tab" data-toggle="tab">多选题</a>
                                </li>
                            </ul>
                        </div>

                        <!--题目内容-->
                        <div class="tab-content">
                            <div role="tabpanel" class="question-wrap tab-pane in active" id="binary">
                                <div class="question-type">一、判断题<span>(共
                                        <?=$count['binary']?>题,每题
                                        <?=$score['binary']?>分)
                                    </span></div>
                                <!--题目表单-->
                                <div class="question-each">
                                    <?php foreach($data['data']['binary']['data'] as $k=>$v): ?>
                                    <!--标题-->
                                    <div class="question-name">
                                        <?=$k, '. ', $v['question']?>
                                    </div>
                                    <div class="question-option">
                                        <label><input type="radio" value="1" name="binary[<?=$k?>]">对</label>
                                        <!--选项-->
                                        <label><input type="radio" value="0" name="binary[<?=$k?>]">错</label>
                                    </div>
                                    <?php endforeach; ?>
                                </div>
                            </div>

                            <div role="tabpanel" id="single" class="tab-pane fade question-wrap">
                                <div class="question-type">二、单选题<span>(共
                                        <?=$count['single']?>题,每题
                                        <?=$score['single']?>分)
                                    </span></div>
                                <div class="question-each">
                                    <?php foreach($data['data']['single']['data'] as $k=>$v): ?>
                                    <div class="question-name">
                                        <?=$k, '. ', $v['question']?>
                                    </div>
                                    <div class="question-option">
                                        <label><input type="radio" value="A" name="single[<?=$k?>]">A.
                                            <?=$v['option'][0]?>
                                        </label>
                                        <label><input type="radio" value="B" name="single[<?=$k?>]">B.
                                            <?=$v['option'][1]?>
                                        </label>
                                        <label><input type="radio" value="C" name="single[<?=$k?>]">C.
                                            <?=$v['option'][2]?>
                                        </label>
                                        <label><input type="radio" value="D" name="single[<?=$k?>]">D.
                                            <?=$v['option'][3]?>
                                        </label>
                                    </div>
                                    <?php endforeach; ?>
                                </div>
                            </div>

                            <div role="tabpanel" id="multiple" class="tab-pane fade question-wrap">
                                <div class="question-type">三、多选题<span>(共
                                        <?=$count['multiple']?>题,每题
                                        <?=$score['multiple']?>分)
                                    </span></div>
                                <div class="question-each">
                                    <?php foreach($data['data']['multiple']['data'] as $k=>$v): ?>
                                    <div class="question-name">
                                        <?=$k, '. ', $v['question']?>
                                    </div>
                                    <div class="question-option">
                                        <label><input type="checkbox" value="A" name="multiple[<?=$k?>][]">A.
                                            <?=$v['option'][0]?>
                                        </label>
                                        <label><input type="checkbox" value="B" name="multiple[<?=$k?>][]">B.
                                            <?=$v['option'][1]?>
                                        </label>
                                        <label><input type="checkbox" value="C" name="multiple[<?=$k?>][]">C.
                                            <?=$v['option'][2]?>
                                        </label>
                                        <label><input type="checkbox" value="D" name="multiple[<?=$k?>][]">D.
                                            <?=$v['option'][3]?>
                                        </label>
                                    </div>
                                    <?php endforeach; ?>
                                </div>
                            </div>
                        </div>

                        <!-- 提交按钮 -->
                        <div class="question-act">
                            <input type="submit" name="submit" value="交卷">
                            <!--此处答案无法传到total-->
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>

    <!-- 页面底部 -->
    <!-- <div style="height: 32px;"></div>
    <div class="footer">
        PHP在线考试系统
    </div> -->
</body>

</html>